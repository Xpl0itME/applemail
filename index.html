<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Uncontrolled Object Creation Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      padding: 20px;
    }
    button {
      padding: 10px 16px;
      margin-right: 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    #start { background: #dc2626; color: white; }
    #stop { background: #16a34a; color: white; }
    #stats {
      margin-top: 20px;
      background: #020617;
      padding: 15px;
      border-radius: 8px;
    }
    .warn {
      color: #facc15;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h2>Uncontrolled Object Creation (DoS Demo)</h2>
  <p>
    This page intentionally creates unlimited objects to demonstrate
    memory and CPU exhaustion.
  </p>

  <button id="start">Start Object Flood</button>
  <button id="stop">Stop</button>

  <div id="stats">
    <div>Objects created: <span id="count">0</span></div>
    <div>Status: <span id="status">Idle</span></div>
  </div>

  <p class="warn">
    Warning: This may freeze your tab or browser.
  </p>

  <script>
    let objects = [];
    let running = false;
    let counter = 0;
    let loopId;

    function createObjects() {
      if (!running) return;

      for (let i = 0; i < 5000; i++) {
        objects.push({
          id: counter++,
          data: new Array(1000).fill("DoS"),
          time: Date.now()
        });
      }

      document.getElementById("count").textContent = counter;

      // keep event loop busy
      loopId = requestAnimationFrame(createObjects);
    }

    document.getElementById("start").onclick = () => {
      if (running) return;
      running = true;
      document.getElementById("status").textContent = "Flooding memory...";
      createObjects();
    };

    document.getElementById("stop").onclick = () => {
      running = false;
      cancelAnimationFrame(loopId);
      objects = [];
      document.getElementById("status").textContent = "Stopped and cleared";
    };
  </script>

</body>
</html>
